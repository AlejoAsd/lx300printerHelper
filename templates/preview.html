<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="UTF-8">
        <title>lx300 printer</title>
    </head>
    <body>
        <script>
            function printRequest()
            {
                var xmlhttp;
                if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
                    xmlhttp=new XMLHttpRequest();
                }else{// code for IE6, IE5
                    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }
                xmlhttp.open("POST","http://127.0.0.1:52738/print/",true);
                xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
                var jsonstr = {{ json_str|safe }}
                //alert(jsonstr);
                xmlhttp.send('text='+jsonstr);
            }
        </script>
        <pre>
            {{ text }}
        </pre>
        <button type="button" onclick="printRequest()">Print</button>
    </body>
</html>